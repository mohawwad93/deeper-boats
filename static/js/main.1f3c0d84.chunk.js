(this["webpackJsonpreact-boats-app"]=this["webpackJsonpreact-boats-app"]||[]).push([[0],{263:function(t,e,n){},266:function(t,e,n){},273:function(t,e){},274:function(t,e){},282:function(t,e){},292:function(t,e){},293:function(t,e){},294:function(t,e){},295:function(t,e){},303:function(t,e){},305:function(t,e,n){"use strict";n.r(e);var a=n(104),i=n.n(a),o=n(196),c=n.n(o),r=(n(263),n(4)),s=n(6),l=n(10),h=n(13),d=n(14),u=n(236),p=n.n(u),f=(n(266),n(88)),g=n(304),v=["boat"],m=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).state={model:null,preview:"",predictions:[]},t.onDrop=function(e,n,a){t.setState({preview:e[0].preview||a[0]})},t.cropToCanvas=function(t,e,n){var a=t.naturalWidth,i=t.naturalHeight;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.fillStyle="#000000",n.fillRect(0,0,e.width,e.height);var o=Math.min(e.width/t.naturalWidth,e.height/t.naturalHeight),c=Math.round(a*o),r=Math.round(i*o);n.drawImage(t,0,0,a,i,(e.width-c)/2,(e.height-r)/2,c,r)},t.onImageChange=function(e){var n=document.getElementById("canvas"),a=n.getContext("2d");t.cropToCanvas(e.target,n,a);var i=g.tidy((function(){return g.image.resizeBilinear(g.browser.fromPixels(n),[640,640]).div(255).expandDims(0)}));t.state.model.executeAsync(i).then((function(t){var e="16px sans-serif";a.font=e,a.textBaseline="top";var i,o=Object(r.a)(t,4),c=o[0],s=o[1],l=o[2],h=o[3],d=c.dataSync(),u=s.dataSync(),p=l.dataSync(),f=h.dataSync()[0];for(g.dispose(t),i=0;i<f;++i){var m=d.slice(4*i,4*(i+1)),j=Object(r.a)(m,4),b=j[0],w=j[1],x=j[2],y=j[3];b*=n.width,x*=n.width,w*=n.height;var F=x-b,O=(y*=n.height)-w,S=v[p[i]],C=u[i].toFixed(2);a.strokeStyle="#00FFFF",a.lineWidth=4,a.strokeRect(b,w,F,O),a.fillStyle="#00FFFF";var D=a.measureText(S+":"+C).width,I=parseInt(e,10);a.fillRect(b,w,D+4,I+4)}for(i=0;i<f;++i){var k=d.slice(4*i,4*(i+1)),M=Object(r.a)(k,3),T=M[0],z=M[1];T*=n.width,z*=n.height;var B=v[p[i]],L=u[i].toFixed(2);a.fillStyle="#000000",a.fillText(B+":"+L,T,z)}}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;g.loadGraphModel("/best_web_model/model.json").then((function(e){t.setState({model:e})}))}},{key:"render",value:function(){return Object(f.jsx)("div",{className:"Dropzone-page",children:this.state.model?Object(f.jsxs)(p.a,{className:"Dropzone",accept:"image/jpeg, image/png, .jpg, .jpeg, .png",multiple:!1,onDrop:this.onDrop,children:[this.state.preview?Object(f.jsx)("img",{alt:"upload preview",onLoad:this.onImageChange,className:"Dropzone-img",src:this.state.preview}):"Choose or drop a file.",Object(f.jsx)("canvas",{id:"canvas",width:"640",height:"640"})]}):Object(f.jsx)("div",{className:"Dropzone",children:"Loading model..."})})}}]),n}(i.a.Component),j=m,b=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,306)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,o=e.getLCP,c=e.getTTFB;n(t),a(t),i(t),o(t),c(t)}))};c.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(j,{})}),document.getElementById("root")),b()}},[[305,1,2]]]);
//# sourceMappingURL=main.1f3c0d84.chunk.js.map